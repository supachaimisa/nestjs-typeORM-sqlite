"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const shared_utils_1 = require("@nestjs/common/utils/shared.utils");
const lazy_metadata_storage_1 = require("../schema-builder/storages/lazy-metadata.storage");
const type_metadata_storage_1 = require("../schema-builder/storages/type-metadata.storage");
function ObjectType(nameOrOptions, objectTypeOptions) {
    const [name, options = {}] = shared_utils_1.isString(nameOrOptions)
        ? [nameOrOptions, objectTypeOptions]
        : [undefined, nameOrOptions];
    const interfaces = options.implements
        ? [].concat(options.implements)
        : undefined;
    return target => {
        const addObjectTypeMetadata = () => type_metadata_storage_1.TypeMetadataStorage.addObjectTypeMetadata({
            name: name || target.name,
            target,
            description: options.description,
            interfaces,
            isAbstract: options.isAbstract,
        });
        addObjectTypeMetadata();
        lazy_metadata_storage_1.LazyMetadataStorage.store(addObjectTypeMetadata);
    };
}
exports.ObjectType = ObjectType;
